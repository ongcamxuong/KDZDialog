machine:
  pre:
    - env
    - pwd
    - ls

checkout:
  post:
    - echo CheckoutPost
    - git submodule sync
    - git submodule update --init

dependencies:
  pre:
    - echo y | android update sdk --no-ui --all --filter "tools,build-tools-25.0.3,platform-tools,android-25,extra-android-m2repository"

  override:
      - ./gradlew dependencies || true

test:
  override:
    - ./gradlew test

compile:
  override:
    - ./gradlew assembleDebug
    - cp -r app/build/outputs $CIRCLE_ARTIFACTS